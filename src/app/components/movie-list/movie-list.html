<div class="movie-container container">
  <h2 class="text-center mb-4">Catalogue de Films</h2>

  <div class="controls d-flex justify-content-between align-items-center mb-4">
    <!-- Categorie select -->
    <div class="sort-buttons d-flex gap-2"><div class="form-group mb-3">
      <select id="categorySelect" class="form-select" [(ngModel)]="selectedCategoryId">
        <option [ngValue]="null">Toutes les catégories</option>
        @for (id of categoryIds; track id) {
        <option [ngValue]="id">{{ categories[id] }}</option>
        }
      </select>
    </div>

      <button class="btn btn-outline-secondary" (click)="sortByYearAsc()">
        <i class="fas fa-sort-up me-2"></i>  Année
      </button>
      <button class="btn btn-outline-secondary" (click)="sortByYearDesc()">
        <i class="fas fa-sort-down me-2"></i> Année
      </button>
    </div>
  </div>


  <!-- Message de chargement -->
  @if (loading) {
    <div class="loading text-center">
      <i class="fas fa-spinner fa-spin"></i> Chargement en cours...
    </div>
  }

  <!-- Message si aucun film -->
  @if (!loading && filteredMovies.length === 0) {
    <div class="no-movies text-center">
      <i class="fas fa-film"></i> Aucun film disponible.
    </div>
  }

  <!-- Grille des films -->
  @if (!loading && filteredMovies.length > 0) {
    <div class="movies-grid">
      @for (movie of filteredMovies; track $index) {
        <div class="movie-card" (click)="onView(movie.id ?? 0)" style="background-color: #1f2122;">
          <!-- Image du film (même pour tous) -->
          <div class="movie-poster">
            <img src="https://st2.depositphotos.com/2586633/46477/v/450/depositphotos_464771766-stock-illustration-no-photo-or-blank-image.jpg"
                 alt="Affiche de film"
                 class="poster-image">
            <div class="poster-overlay"></div>
            <div class="view-overlay">
              <i class="fas fa-search"></i>
            </div>
          </div>

          <!-- Contenu du film -->
          <div class="movie-content">
            <h3 class="movie-title">{{ movie.title }}</h3>

            <!-- Informations qui apparaissent au hover -->
            <div class="movie-info">
              <div class="info-item">
                <span class="info-label">Réalisateur:</span>
                <span class="info-value">{{ movie.director }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Note:</span>
                <span class="info-value rating">{{ movie.rating }}/10 ⭐</span>
              </div>
              <div class="info-item">
                <span class="info-label">Année:</span>
                <span class="info-value">{{ movie.release_year }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Catégorie:</span>
                <span class="info-value">{{ getCategoryName(movie.category_id) }}</span>
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
